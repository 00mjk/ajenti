<div class="row">
    <progress-spinner ng:show="loading"></progress-spinner>
    <div class="list-group" ng:hide="loading" keyboard-focus>
        <div ng:show="parent" class="list-group-item list-group-item-small">
            <div class="list-group-btn pull-left">
                <span checkbox disabled></span>
            </div>
            <a ng:click="navigate(parent)" class="list-group-main">
                &nbsp;
                <i class="fa fa-fw fa-level-up"></i> Up one level
            </a>
        </div>
        <div ng:repeat="item in items|orderBy:['-isDir', 'name']" class="list-group-item list-group-item-small">
            <a href="/view/filemanager/properties/{{item.path}}" class="list-group-btn subtle" title="Properties">
                <i class="fa fa-cog"></i>
            </a>
            <div class="list-group-addon pull-left">
                <span class="subtle" checkbox ng:model="item.selected"></span>
            </div>
            <a ng:href="/view/filemanager{{item.isDir ? '' : '/properties'}}/{{item.path}}" class="list-group-main">
                &nbsp;
                <i class="fa fa-fw fa-folder-o" ng:if="item.isDir"></i>
                <i class="fa fa-fw fa-file-o" ng:if="item.isFile"></i>
                &nbsp;
                {{item.name}}
                &nbsp;
                <span class="subtle" ng:show="item.isFile">{{item.size|bytes}}</span>
            </a>
        </div>
    </div>
</div>

<div class="floating-toolbar-padder"></div>

<floating-toolbar>
    <a ng:click="showClipboard()" ng:show="clipboard.length > 0" class="btn btn-default btn-flat pull-right">
        <i class="fa fa-paste"></i> {{clipboard.length}}
    </a>

    <a ng:click="showNewFileDialog()" class="btn btn-default btn-flat">New file</a>
    <a ng:click="showNewDirectoryDialog()" class="btn btn-default btn-flat">New directory</a>
    <a ng:click="doPaste()" ng:show="clipboard.length > 0" class="btn btn-default btn-flat">Paste here</a>

    <a href="/view/filemanager/{{path}}" target="_blank" class="btn btn-default btn-flat pull-right">
        <i class="fa fa-plus"></i> Tab
    </a>
</floating-toolbar>

<floating-toolbar class="accented" ng:show="(items|filter:{selected:true}).length > 0">
    <a disabled class="btn btn-default btn-flat pull-right">
        <strong>{{(items|filter:{selected:true}).length}}</strong> items selected
    </a>

    <a ng:click="doCut()" class="btn btn-default btn-flat">Cut</a>
    <a ng:click="doCopy()" class="btn btn-default btn-flat">Copy</a>
    <a ng:click="doDelete()" class="btn btn-default btn-flat">Delete</a>
</floating-toolbar>

<dialog ng:show="newFileDialogVisible">
    <div class="modal-header">
        <h4>New file</h4>
    </div>
    <div class="modal-body">
        <input type="text" ng:model="$parent.newFileName" class="form-control" placeholder="File name" autofocus ng:enter="doCreateFile()" />
    </div>
    <div class="modal-footer">
        <a ng:click="doCreateFile()" class="btn btn-primary btn-flat">Create</a>
        <a ng:click="hideNewFileDialog()" class="btn btn-default btn-flat">Cancel</a>
    </div>
</dialog>

<dialog ng:show="newDirectoryDialogVisible">
    <div class="modal-header">
        <h4>New directory</h4>
    </div>
    <div class="modal-body">
        <input type="text" ng:model="$parent.newDirectoryName" class="form-control" placeholder="Directory name" autofocus ng:enter="doCreateDirectory()" />
    </div>
    <div class="modal-footer">
        <a ng:click="doCreateDirectory()" class="btn btn-primary btn-flat">Create</a>
        <a ng:click="hideNewDirectoryDialog()" class="btn btn-default btn-flat">Cancel</a>
    </div>
</dialog>

<dialog ng:show="clipboardVisible && clipboard.length > 0">
    <div class="modal-header">
        <h4>Clipboard</h4>
    </div>
    <div class="modal-body">
        <div class="list-group">
            <div ng:repeat="item in clipboard" class="list-group-item list-group-item-small">
                <a ng:click="clipboard.splice($index, 1)" class="list-group-btn subtle" title="Remove">
                    <i class="fa fa-times"></i>
                </a>
                <div class="list-group-main">
                    <i class="fa fa-fw fa-cut" ng:if="item.mode == 'move'"></i>
                    <i class="fa fa-fw fa-copy" ng:if="item.mode == 'copy'"></i>
                    &nbsp;
                    <i class="fa fa-fw fa-folder-o" ng:if="item.item.isDir"></i>
                    <i class="fa fa-fw fa-file-o" ng:if="item.item.isFile"></i>
                    &nbsp;
                    {{item.item.path}}
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <a ng:click="clearClipboard()" class="btn btn-default btn-flat">Remove all items</a>
        <a ng:click="hideClipboard()" class="btn btn-default btn-flat">Close</a>
    </div>
</dialog>
